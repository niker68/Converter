# Converter

### Требуемое ПО

Для сборки и запуска проекта требуются:
- [Java 11 (Open JDK)](https://openjdk.java.net/projects/jdk/11/)
- [Apache Maven 3.3+](https://maven.apache.org/)

Для развертывания приложения используется механизм контейнеризации:
- [Docker](https://www.docker.com/)

## Правила конвертации
Правила конвертации находят в [файле](https://github.com/niker68/Converter/blob/master/file.csv) в формате [CSV](https://en.wikipedia.org/wiki/Comma-separated_values):
```csv
S,T,value
```
Здесь, `S` и `T` — единицы измерения, а `value` соответствует количеству `T` в одном `S`.

Пример файла:
```csv
sm,m,0.01
mm,m,0.001
km,m,1000
h,min,60
min,s,60
kg,g,1000
```
В данном примере заданы 5 правил преобразования:
- `1 см = 0.01 м`
- `1 мм = 0.001 м`
- `1 км = 1000 м`
- `1 час = 60 мин`
- `1 мин = 60 с`
- `1 кг = 1000г`

Путь до файла передается через аргументы при запуске HTTP-сервиса.
Вы можете дополнить данный файл своими правилами конвертации или указать путь к другому файлу правил конвертации.

### Запуск приложения

Для запуска приложения необходимо:
1. Отредактировать файл rules.txt с правилами конвертации в папке data.
2. Скомпилировать и собрать проект: mvn clean package
3. Запустить создание образов и контейнеров приложения: docker-compose up -d

## Выражения для преобразования
Выражения записываются с использованием заданных в файле обозначений для единиц измерений,
используя только знаки умножения `*` и деления `/`.
При этом знак деления может использоваться не более одного раза и служит для записи обыкновенной дроби.

**Примечание.** Пробельные символы не учитываются.

Пример "безразмерная величина":
```text
(пустая строка)
```

Пример "метр":
```text
м
```

Пример "герц":
```text
1 / с
```

Пример "метр в секунду":
```text
м / с
```

Пример "ньютон"
```text
кг * м / с * с
```
Здесь `кг * м` - числитель, а `c * c` - знаменатель.

## API
Сервис предоставляет один метод `POST localhost:8888/convert` с JSON в теле запроса: 
```json
{
 "from": "<выражение в исходных единицах измерения>",
 "to": "<выражение в единицах измерения, которые необходимо получить>"
}
```

Варианты ответа сервиса:
- Код `400 Bad Request`, в выражениях используются неизвестные единицы измерения
(т.е. отсутствуют в предоставленном файле с правилами конвертации).
- Код `404 Not Found`, невозможно осуществить такое преобразование
(например, нельзя перевести метры в килограммы).
- Код `200 OK`, преобразование возможно,
а в теле ответа возвращается коэффициент преобразования в виде десятичной дроби с **15 значащими цифрами**.

Пример тела запроса:
```json
{
 "from": "м / с",
 "to":  "км / час"
}
```
И соответствующее тело ответа (предполагается, что CSV-файл взят из примера выше):
```text
3.6
```
Таким образом, сервис подтверждает возможность преобразования по следующей формуле:
```text
1 м / с = 3.6 км / час
```

## Примеры преобразований
В приведённых примерах используется следующий файл преобразований:
```csv
sm,m,0.01
mm,m,0.001
km,m,1000
h,min,60
min,s,60
kg,g,1000
```

Сервис успешно осуществляет преобразования, соответствующие формулам:
```text
1 м = 3.6 км * с / час
```
```text
1 км / м = 1000
```
## Контакты
  Created by [@niker68](mailto:niker68@yandex.ru)
